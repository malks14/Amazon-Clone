{"version":3,"sources":["store/cart-context.js","store/CartProvider.js","store/use-context.js","firebase.js","MainNavigation/Header.js","UI/Input.js","Products/ProductItemForm.js","Products/Products.js","Body/Home.js","Cart/Subtotal.js","Cart/CheckoutProduct.js","Cart/Checkout.js","Body/Login.js","Payment/PaymentProducts.js","store/use-reducer.js","Payment/Payment.js","App.js","reportWebVitals.js","index.js","Products/ProductItemForm.module.css","UI/Input.module.css"],"names":["CartContext","React","createContext","items","totalAmount","addItem","item","removeItem","id","defaultCartState","cartReducer","state","action","type","updatedItems","updatedTotalAmount","price","amount","existingCartItemIndex","findIndex","existingCartItem","updatedItem","concat","existingItem","filter","CartProvider","props","useReducer","cartState","dispatchCartAction","cartContext","Provider","value","children","StateContext","StateProvider","reducer","initialState","useStateValue","useContext","auth","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","firestore","Header","cartCtx","user","basket","numberOfCartItems","reduce","curNumber","className","to","src","onClick","signOut","email","Input","forwardRef","ref","styles","input","htmlFor","label","ProductItemForm","useState","amountIsValid","setAmountIsValid","amountInputRef","useRef","form","onSubmit","event","preventDefault","enteredAmount","current","enteredAmountNumber","trim","length","onAddToCart","min","max","step","defaultValue","Products","title","Array","rating","fill","map","_","i","image","Home","products","setProducts","isLoading","setIsLoading","httpError","setHttpError","useEffect","fetchProducts","a","fetch","response","ok","Error","json","key","responseData","loadedProducts","push","catch","error","message","ProductsLoading","ProductsError","productsList","product","alt","Subtotal","hasItems","toFixed","history","useHistory","CheckoutProduct","onRemove","onAdd","Checkout","cartItemRemoveHandler","cartItemAddHandler","bind","Login","setEmail","setUser","password","setPassword","isLogin","setIsLogin","onChange","target","signInWithEmailAndPassword","then","alert","signInHandler","createUserWithEmailAndPassword","console","log","registerHandler","prevState","PaymentProducts","getBasketTotal","index","basketItem","newBasket","splice","warn","Payment","setError","disabled","setDisabled","succeeded","setSucceeded","processing","setProcessing","clientSecret","setClientSecret","getClientSecret","axios","method","url","data","stripe","useStripe","elements","useElements","submitHandler","confirmCardPayment","payment_method","card","getElement","CardElement","paymentIntent","replace","empyty","promise","loadStripe","App","dispatch","onAuthStateChanged","authUser","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById","module","exports"],"mappings":"sMAUeA,EAPKC,IAAMC,cAAc,CACpCC,MAAO,GACPC,YAAa,EACbC,QAAS,SAACC,KACVC,WAAY,SAACC,O,OCHXC,EAAmB,CACvBN,MAAO,GACPC,YAAa,GAGTM,EAAc,SAACC,EAAOC,GAC1B,GAAoB,QAAhBA,EAAOC,KAAgB,CACzB,IAQIC,EAREC,EACJJ,EAAMP,YAAcQ,EAAON,KAAKU,MAAQJ,EAAON,KAAKW,OAEhDC,EAAwBP,EAAMR,MAAMgB,WACxC,SAACb,GAAD,OAAUA,EAAKE,KAAOI,EAAON,KAAKE,MAE9BY,EAAmBT,EAAMR,MAAMe,GAIrC,GAAIE,EAAkB,CACpB,IAAMC,EAAW,2BACZD,GADY,IAEfH,OAAQG,EAAiBH,OAASL,EAAON,KAAKW,UAGhDH,EAAY,YAAOH,EAAMR,QACZe,GAAyBG,OAEtCP,EAAeH,EAAMR,MAAMmB,OAAOV,EAAON,MAG3C,MAAO,CACLH,MAAOW,EACPV,YAAaW,GAIjB,GAAoB,WAAhBH,EAAOC,KAAmB,CAC5B,IAKIC,EALEI,EAAwBP,EAAMR,MAAMgB,WACxC,SAACb,GAAD,OAAUA,EAAKE,KAAOI,EAAOJ,MAEzBe,EAAeZ,EAAMR,MAAMe,GAC3BH,EAAqBJ,EAAMP,YAAcmB,EAAaP,MAE5D,GAA4B,IAAxBO,EAAaN,OACfH,EAAeH,EAAMR,MAAMqB,QAAO,SAAClB,GAAD,OAAUA,EAAKE,KAAOI,EAAOJ,UAC1D,CACL,IAAMa,EAAW,2BAAQE,GAAR,IAAsBN,OAAQM,EAAaN,OAAS,KACrEH,EAAY,YAAOH,EAAMR,QACZe,GAAyBG,EAExC,MAAQ,CACJlB,MAAOW,EACPV,YAAaW,GAOnB,OAAON,GA8BMgB,EA3BM,SAACC,GACpB,MAAwCC,qBACtCjB,EACAD,GAFF,mBAAOmB,EAAP,KAAkBC,EAAlB,KAYMC,EAAc,CAClB3B,MAAOyB,EAAUzB,MACjBC,YAAawB,EAAUxB,YACvBC,QAV2B,SAACC,GAC5BuB,EAAmB,CAAEhB,KAAM,MAAOP,KAAMA,KAUxCC,WARgC,SAACC,GACjCqB,EAAmB,CAAEhB,KAAM,SAAUL,GAAIA,MAU3C,OACE,cAAC,EAAYuB,SAAb,CAAsBC,MAAOF,EAA7B,SACGJ,EAAMO,Y,wDCpFAC,EAAehC,0BAIfiC,EAAgB,SAAC,GAAD,IAAEC,EAAF,EAAEA,QAASC,EAAX,EAAWA,aAAcJ,EAAzB,EAAyBA,SAAzB,OACzB,cAACC,EAAaH,SAAd,CAAuBC,MAAQL,qBAAWS,EAASC,GAAnD,SACKJ,KAKIK,EAAgB,kBAAMC,qBAAWL,I,iBCCxCM,GAHcC,IAASC,cATN,CACrBC,OAAQ,0CACRC,WAAY,kCACZC,UAAW,kBACXC,cAAe,8BACfC,kBAAmB,eACnBC,MAAO,8CAKcC,YACVR,IAASD,QCoDPU,EA1DA,WACb,IAAMC,EAAWZ,qBAAWvC,GAC5B,EAAqCsC,IAArC,0BAAiBc,GAAjB,EAASC,OAAT,EAAiBD,MAEXE,GAFN,KAE0BH,EAAQhD,MAAMoD,QAAO,SAACC,EAAWlD,GACzD,OAAOkD,EAAYlD,EAAKW,SACvB,IAQH,OACE,sBAAKwC,UAAU,SAAf,UACE,cAAC,IAAD,CAAMC,GAAG,IAAT,SACE,qBACED,UAAU,eACVE,IAAI,wDAIR,sBAAKF,UAAU,iBAAf,UACE,uBAAOA,UAAU,sBAAsB5C,KAAK,SAC5C,cAAC,IAAD,CAAY4C,UAAU,0BAExB,sBAAKA,UAAU,cAAf,UAEE,cAAC,IAAD,CAAMC,IAAKN,GAAQ,SAAnB,SACE,sBAAKQ,QAtBO,WACdR,GACFZ,EAAKqB,WAoB0BJ,UAAU,iBAArC,UACE,uBAAMA,UAAU,wBAAhB,mBAAgDL,EAAD,OAAiBA,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAMU,MAAf,UACvD,sBAAML,UAAU,wBAAhB,SAAyCL,EAAO,WAAa,iBAIjE,sBAAKK,UAAU,iBAAf,UACE,sBAAMA,UAAU,wBAAhB,qBACA,sBAAMA,UAAU,wBAAhB,wBAEF,sBAAKA,UAAU,iBAAf,UACE,sBAAMA,UAAU,wBAAhB,kBACA,sBAAMA,UAAU,wBAAhB,sBAGF,cAAC,IAAD,CAAMC,GAAG,YAAT,SACE,sBAAKD,UAAU,uBAAf,UACE,cAAC,IAAD,IACA,sBAAMA,UAAU,4CAAhB,SACGH,gB,oFC/CAS,EAPD9D,IAAM+D,YAAW,SAACtC,EAAOuC,GACnC,OAAO,sBAAKR,UAAWS,IAAOC,MAAvB,UACH,uBAAOC,QAAS1C,EAAMyC,MAAM3D,GAA5B,SAAiCkB,EAAM2C,QACvC,mCAAOJ,IAAKA,GAASvC,EAAMyC,cCyCpBG,EA3CS,SAAC5C,GAErB,MAA0C6C,oBAAS,GAAnD,mBAAOC,EAAP,KAAsBC,EAAtB,KAEMC,EAAiBC,mBAmBvB,OACI,uBAAMlB,UAAWS,IAAOU,KAAMC,SAlBZ,SAAAC,GAClBA,EAAMC,iBAEN,IAAMC,EAAgBN,EAAeO,QAAQjD,MACvCkD,GAAuBF,EAEO,IAAhCA,EAAcG,OAAOC,QACrBF,EAAsB,GACtBA,EAAsB,EAEtBT,GAAiB,GAIrB/C,EAAM2D,YAAYH,IAIlB,UACI,cAAC,EAAD,CACAjB,IAAKS,EACLL,MAAM,SACNF,MAAO,CACH3D,GAAI,SAAWkB,EAAMlB,GACrBK,KAAM,SACNyE,IAAK,IACLC,IAAK,IACLC,KAAM,IACNC,aAAc,OAGlB,oDACEjB,GAAiB,uECAhBkB,EArCE,SAAChE,GAEhB,IAAMyB,EAAWZ,qBAAWvC,GAa5B,OACE,sBAAKyD,UAAU,UAAf,UACE,sBAAKA,UAAU,gBAAf,UACE,4BAAI/B,EAAMiE,QACV,oBAAGlC,UAAU,iBAAb,UACE,sCACA,iCAAS/B,EAAMV,WAEjB,qBAAKyC,UAAU,kBAAf,SACGmC,MAAMlE,EAAMmE,QACVC,OACAC,KAAI,SAACC,EAAGC,GAAJ,OACH,+CAIR,qBAAKtC,IAAKjC,EAAMwE,QAChB,cAAC,EAAD,CAAiBb,YA5BI,SAAApE,GACvBkC,EAAQ9C,QAAQ,CACdG,GAAIkB,EAAMlB,GACVmF,MAAOjE,EAAMiE,MACb1E,OAAQA,EACRiF,MAAOxE,EAAMwE,MACbL,OAAQnE,EAAMmE,OACd7E,MAAOU,EAAMV,eCuEJmF,EApFF,WACX,MAAgC5B,mBAAS,IAAzC,mBAAO6B,EAAP,KAAiBC,EAAjB,KACA,EAAkC9B,oBAAS,GAA3C,mBAAO+B,EAAP,KAAkBC,EAAlB,KACA,EAAkChC,qBAAlC,mBAAOiC,EAAP,KAAkBC,EAAlB,KAiCA,GAhCAC,qBAAU,WACR,IAAMC,EAAa,uCAAG,kCAAAC,EAAA,sEACGC,MACrB,qEAFkB,WACdC,EADc,QAKNC,GALM,sBAMZ,IAAIC,MAAM,wBANE,uBASOF,EAASG,OAThB,OAYpB,IAAWC,KAHLC,EATc,OAUdC,EAAiB,GAELD,EAChBC,EAAeC,KAAK,CAClB7G,GAAI0G,EACJvB,MAAOwB,EAAaD,GAAKvB,MACzB3E,MAAOmG,EAAaD,GAAKlG,MACzBkF,MAAOiB,EAAaD,GAAKhB,MACzBL,OAAQsB,EAAaD,GAAKrB,SAG9BQ,EAAYe,GACZb,GAAa,GAtBO,4CAAH,qDAyBnBI,IAAgBW,OAAM,SAACC,GACrBhB,GAAa,GACbE,EAAac,EAAMC,cAEpB,IAEClB,EACF,OAAO,yBAAS7C,UAAWS,IAAOuD,gBAA3B,SACH,6CAIN,GAAIjB,EACF,OAAO,yBAAS/C,UAAWS,IAAOwD,cAA3B,SACL,4BAAIlB,MAIR,IAAMmB,EAAevB,EAASL,KAAI,SAAA6B,GAAO,OAAI,cAAC,EAAD,CAE3CpH,GAAIoH,EAAQpH,GACZmF,MAAOiC,EAAQjC,MACfE,OAAQ+B,EAAQ/B,OAChB7E,MAAO4G,EAAQ5G,MACfkF,MAAO0B,EAAQ1B,OALV0B,EAAQpH,OAQf,OACE,qBAAKiD,UAAU,OAAf,SACE,sBAAKA,UAAU,kBAAf,UACE,qBACEA,UAAU,cACVE,IAAI,6KACJkE,IAAI,KAEN,sBAAKpE,UAAU,YAAf,UACGkE,EAAa,GACbA,EAAa,MAGhB,sBAAKlE,UAAU,YAAf,UACCkE,EAAa,GACbA,EAAa,GACbA,EAAa,MAGd,qBAAKlE,UAAU,YAAf,SACCkE,EAAa,W,OCzCPG,G,MAjCE,WAGf,IAAM3E,EAAUZ,qBAAWvC,GACrBsD,EAAoBH,EAAQhD,MAAMoD,QAAO,SAACC,EAAWlD,GACzD,OAAOkD,EAAYlD,EAAKW,SACvB,GAEG8G,EAAW5E,EAAQhD,MAAMiF,OAAS,EAElChF,EAAW,WAAO+C,EAAQ/C,YAAY4H,QAAQ,IAC9CC,EAAUC,cAQjB,OAAO,sBAAKzE,UAAU,WAAf,UAEI,2CAEaH,EAFb,YAEwC,iCAASlD,OAEhD2H,GAAY,wBAAOtE,UAAU,iBAAjB,UACX,uBAAO5C,KAAK,aADD,iCAIlBkH,GAAY,wBAAQnE,QAhBF,SAACkB,GACtBA,EAAMC,iBACNkD,EAAQZ,KAAK,aAcE,sCCAJc,G,YAhCS,SAACzG,GAIvB,OACE,sBAAK+B,UAAU,kBAAf,UACE,qBAAKA,UAAU,yBAAyBE,IAAKjC,EAAMwE,QAEnD,sBAAKzC,UAAU,wBAAf,UACE,mBAAGA,UAAU,yBAAb,SAAuC/B,EAAMiE,QAC7C,oBAAGlC,UAAU,yBAAb,UACE,sCACA,iCAAS/B,EAAMV,WAEjB,sCAASU,EAAMT,UACf,qBAAKwC,UAAU,0BAAf,SACGmC,MAAMlE,EAAMmE,QACVC,OACAC,KAAI,SAACC,EAAGC,GAAJ,OACH,4CAGN,gCACE,wBAAQrC,QAASlC,EAAM0G,SAAvB,oBACA,wBAAQxE,QAASlC,EAAM2G,MAAvB,kBAEF,gECgCOC,EApDE,WAEf,IAAMnF,EAAUZ,qBAAWvC,GAI3B,EAAmCsC,IAAnC,0BAAgBc,GAAhB,EAAQC,OAAR,EAAgBD,MAEVmF,GAFN,KAE8B,SAAA/H,GAC5B2C,EAAQ5C,WAAWC,KAEfgI,EAAqB,SAAAlI,GACzB6C,EAAQ9C,QAAR,2BAAoBC,GAApB,IAA0BW,OAAQ,MAMpC,OACE,sBAAKwC,UAAU,WAAf,UACE,sBAAKA,UAAU,iBAAf,UACE,qBACEA,UAAU,eACVE,IAAI,+FACJkE,IAAI,gBAEN,gCACE,gDAAYzE,QAAZ,IAAYA,OAAZ,EAAYA,EAAMU,SAClB,oBAAIL,UAAU,kBAAd,kCACCN,EAAQhD,MAAM4F,KAAI,SAAAzF,GAAI,OACrB,cAAC,EAAD,CAEAE,GAAIF,EAAKE,GACTmF,MAAOrF,EAAKqF,MACZO,MAAO5F,EAAK4F,MACZjF,OAAQX,EAAKW,OACbD,MAAOV,EAAKU,MACZ6E,OAAQvF,EAAKuF,OACbuC,SAAUG,EAAsBE,KAAK,KAAMnI,EAAKE,IAChD6H,MAAOG,EAAmBC,KAAK,KAAMnI,IARhCA,EAAKE,aAchB,qBAAKiD,UAAU,kBAAf,SACI,cAAC,EAAD,UCkEKiF,G,MArHD,WACZ,IAAMT,EAAUC,cAChB,EAA0B3D,mBAAS,IAAnC,mBAAOT,EAAP,KAAc6E,EAAd,KACA,EAAwBpE,mBAAS,IAAjC,mBAAOnB,EAAP,KAAawF,EAAb,KACA,EAAgCrE,mBAAS,IAAzC,mBAAOsE,EAAP,KAAiBC,EAAjB,KACA,EAA8BvE,oBAAS,GAAvC,mBAAOwE,EAAP,KAAgBC,EAAhB,KAgDA,OACE,sBAAKvF,UAAU,QAAf,UACE,cAAC,IAAD,CAAMC,GAAG,IAAT,SACE,qBACED,UAAU,cACVE,IAAI,uGACJkE,IAAI,kBAIR,sBAAKpE,UAAU,mBAAf,UACE,6BAAKsF,EAAU,UAAY,YAC3B,kCACIA,GAAW,uBAAO3E,QAAQ,OAAf,uBACZ2E,GAAW,uBACV/G,MAAOoB,EACPvC,KAAK,OACLL,GAAG,OACHyI,SA5DU,SAACnE,GACnB8D,EAAQ9D,EAAMoE,OAAOlH,UA6Df,uBAAOoC,QAAQ,QAAf,mBACA,uBACEpC,MAAO8B,EACPjD,KAAK,QACLL,GAAG,QACHyI,SA/DW,SAACnE,GACpB6D,EAAS7D,EAAMoE,OAAOlH,UAgEhB,uBAAOoC,QAAQ,WAAf,sBACA,uBACEpC,MAAO6G,EACPhI,KAAK,WACLL,GAAG,WACHyI,SAlEc,SAACnE,GACvBgE,EAAYhE,EAAMoE,OAAOlH,UAuEnB,wBACEnB,KAAK,SACL+C,QAhDc,SAACkB,GACnBiE,EAvBgB,SAACjE,GACrBA,EAAMC,iBACNvC,EACG2G,2BAA2BrF,EAAO+E,GAClCO,MAAK,SAAC5G,GACLyF,EAAQZ,KAAK,QAEdC,OAAM,SAACC,GAAD,OAAW8B,MAAM9B,EAAMC,YAiB9B8B,CAAcxE,GAdM,SAACA,GACvBA,EAAMC,iBACNvC,EACG+G,+BAA+BzF,EAAO+E,GACtCO,MAAK,SAAC5G,GACLgH,QAAQC,IAAIjH,GACRA,GACFyF,EAAQZ,KAAK,QAGhBC,OAAM,SAACC,GAAD,OAAW8B,MAAM9B,EAAMC,YAM9BkC,CAAgB5E,IA6CVrB,UAAU,sBAHZ,SAKGsF,EAAU,UAAY,sBAG3B,gMAKA,wBACEnF,QAlGsB,WAC5BoF,GAAW,SAACW,GAAD,OAAgBA,MAkGrBlG,UAAU,wBAFZ,SAIGsF,EACG,6BACA,wC,QC3FCa,G,MAtBS,SAAClI,GACrB,OAAW,sBAAK+B,UAAU,kBAAf,UACX,qBAAKA,UAAU,yBAAyBE,IAAKjC,EAAMwE,QAEnD,sBAAKzC,UAAU,wBAAf,UACE,mBAAGA,UAAU,yBAAb,SAAuC/B,EAAMiE,QAC7C,oBAAGlC,UAAU,yBAAb,UACE,sCACA,iCAAS/B,EAAMV,WAEjB,sCAASU,EAAMT,UACf,qBAAKwC,UAAU,0BAAf,SACGmC,MAAMlE,EAAMmE,QACVC,OACAC,KAAI,SAACC,EAAGC,GAAJ,OACH,oDCXC4D,EAAiB,SAACxG,GAAD,cAC5BA,QAD4B,IAC5BA,OAD4B,EAC5BA,EAAQE,QAAO,SAACtC,EAAQX,GAAT,OAAkBA,EAAKU,MAAQC,IAAQ,IAsCzCmB,EApCC,SAACzB,EAAOC,GAEtB,OAAQA,EAAOC,MACb,IAAK,gBACH,OAAO,2BACFF,GADL,IAEE0C,OAAO,GAAD,mBAAM1C,EAAM0C,QAAZ,CAAoBzC,EAAON,SAGrC,IAAK,cACH,IAAMwJ,EAAQnJ,EAAM0C,OAAOlC,WACzB,SAAC4I,GAAD,OAAgBA,EAAWvJ,KAAOI,EAAOJ,MAEvCwJ,EAAS,YAAOrJ,EAAM0C,QAQ1B,OAPIyG,GAAS,EACXE,EAAUC,OAAOH,EAAO,GAExBN,QAAQU,KAAR,mCAC8BtJ,EAAOJ,GADrC,4BAIK,2BAAKG,GAAZ,IAAmB0C,OAAQ2G,IAG3B,IAAK,WACH,OAAO,2BACFrJ,GADL,IAEEyC,KAAMxC,EAAOwC,OAInB,QACE,OAAOzC,I,yBC6FEwJ,EA1HC,WACd,IAAMlC,EAAUC,cAChB,EAAqC5F,IAArC,0BAASe,EAAT,EAASA,OAAQD,EAAjB,EAAiBA,KACjB,GADA,KAC0BmB,mBAAS,OAAnC,mBAAOgD,EAAP,KAAc6C,EAAd,KACA,EAAgC7F,oBAAS,GAAzC,mBAAO8F,EAAP,KAAiBC,EAAjB,KACA,EAAkC/F,oBAAS,GAA3C,mBAAOgG,EAAP,KAAkBC,EAAlB,KACA,EAAoCjG,mBAAS,IAA7C,mBAAOkG,EAAP,KAAmBC,EAAnB,KACA,EAAwCnG,oBAAS,GAAjD,mBAAOoG,EAAP,KAAqBC,EAArB,KAEMzH,EAAUZ,qBAAWvC,GACrBI,EAAW,WAAO+C,EAAQ/C,YAAY4H,QAAQ,IAE9C1E,EAAoBH,EAAQhD,MAAMoD,QAAO,SAACC,EAAWlD,GACzD,OAAOkD,EAAYlD,EAAKW,SACvB,GAEGsH,EAAwB,SAAA/H,GAC5B2C,EAAQ5C,WAAWC,IAEfgI,EAAqB,SAAAlI,GACzB6C,EAAQ9C,QAAR,2BAAoBC,GAApB,IAA0BW,OAAQ,MAGpCyF,qBAAU,WAER,IAAMmE,EAAe,uCAAG,4BAAAjE,EAAA,sEACCkE,IAAM,CAC3BC,OAAQ,OACRC,IAAI,0BAAD,OAAqD,IAAzBnB,EAAexG,MAH1B,OAChByD,EADgB,OAKtB8D,EAAgB9D,EAASmE,KAAKN,cALR,2CAAH,qDAOrBE,MACC,CAACxH,IAEJ,IAAM6H,EAASC,sBACTC,EAAWC,wBAEXC,EAAa,uCAAG,WAAOxG,GAAP,SAAA8B,EAAA,6DACpB9B,EAAMC,iBACN2F,GAAc,GAFM,SAIEQ,EACnBK,mBAAmBZ,EAAc,CAChCa,eAAgB,CACdC,KAAML,EAASM,WAAWC,kBAG7BvC,MAAK,YAAuB,EAApBwC,cAEPpB,GAAa,GACbE,GAAc,GACdN,EAAS,MACTnC,EAAQ4D,QAAQ,cAfA,yDAAH,sDAwBnB,OACE,qBAAKpI,UAAU,UAAf,SACE,sBAAKA,UAAU,qBAAf,UACE,+BACG,IADH,aAEY,eAAC,IAAD,CAAMC,GAAG,YAAT,UAAsBJ,EAAtB,YAFZ,OAIA,sBAAKG,UAAU,mBAAf,UACE,qBAAKA,UAAU,iBAAf,SACE,oDAEF,sBAAKA,UAAU,mBAAf,UACE,mCAAIL,QAAJ,IAAIA,OAAJ,EAAIA,EAAMU,QACV,uCACA,2CAGJ,sBAAKL,UAAU,mBAAf,UACE,qBAAKA,UAAU,iBAAf,SACE,8DAEF,qBAAKA,UAAU,iBAAf,SACGN,EAAQhD,MAAM4F,KAAI,SAACzF,GAAD,OACjB,cAAC,EAAD,CAEEE,GAAIF,EAAKE,GACTS,OAAQX,EAAKW,OACb0E,MAAOrF,EAAKqF,MACZO,MAAO5F,EAAK4F,MACZlF,MAAOV,EAAKU,MACZ6E,OAAQvF,EAAKuF,OACbuC,SAAUG,EAAsBE,KAAK,KAAMnI,EAAKE,IAChD6H,MAAOG,EAAmBC,KAAK,KAAMnI,IARhCA,EAAKE,YAalB,sBAAKiD,UAAU,mBAAf,UACE,qBAAKA,UAAU,iBAAf,SACE,kDAEF,qBAAKA,UAAU,mBAAf,SACE,uBAAMoB,SAAUyG,EAAhB,UACE,cAAC,cAAD,CAAarC,SAhDJ,SAACnE,GACpBwF,EAAYxF,EAAMgH,QAClB1B,EAAStF,EAAMyC,MAAQzC,EAAMyC,MAAMC,QAAU,OA+CnC,sBAAK/D,UAAU,0BAAf,UACE,+CAAkBrD,KAElB,wBAAQiK,SAAUI,GAAcJ,GAAYE,EAA5C,SACE,+BAAOE,EAAa,2CAAoB,iBAG3ClD,GAAS,8BAAMA,kB,QC/GxBwE,GAAUC,YACd,+GAoDaC,OAjDf,WACE,MAAuB3J,IAAvB,yCAAW4J,EAAX,KAuBA,OArBAxF,qBAAU,WAERlE,EAAK2J,oBAAmB,SAACC,GACvB5C,QAAQC,IAAI,eAAgB2C,GAI1BF,EAFEE,EAEO,CACPvL,KAAM,WACNuC,KAAMgJ,GAIC,CACPvL,KAAM,WACNuC,KAAM,YAIX,IAGD,cAAC,EAAD,UACE,sBAAKK,UAAU,MAAf,UACE,cAAC,EAAD,IACA,eAAC,IAAD,WACE,cAAC,IAAD,CAAO4I,KAAK,SAAZ,SACE,cAAC,EAAD,MAEF,cAAC,IAAD,CAAOA,KAAK,YAAZ,SACE,cAAC,EAAD,MAEF,cAAC,IAAD,CAAOA,KAAK,WAAZ,SACE,cAAC,WAAD,CAAUnB,OAAQa,GAAlB,SACE,cAAC,EAAD,QAGJ,cAAC,IAAD,CAAOM,KAAK,IAAZ,SACE,cAAC,EAAD,eC/CGC,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBpD,MAAK,YAAkD,IAA/CqD,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCEdO,IAASC,OACP,cAAC,IAAD,UACE,eAAC,EAAD,CAAe1K,aJXS,CAC1BgB,OAAQ,GACRD,KAAM,MISuChB,QAASA,EAApD,UACGA,EACD,cAAC,GAAD,SAGJ4K,SAASC,eAAe,SAM1BX,M,wCCrBAY,EAAOC,QAAU,CAAC,KAAO,gC,mBCAzBD,EAAOC,QAAU,CAAC,MAAQ,uB","file":"static/js/main.8fcdbe08.chunk.js","sourcesContent":["import React from 'react';\n\n\nconst CartContext = React.createContext({\n    items: [],\n    totalAmount: 0,\n    addItem: (item) => {},\n    removeItem: (id) => {}\n});\n\nexport default CartContext;","import { useReducer } from \"react\";\n\nimport CartContext from \"./cart-context\";\n\nconst defaultCartState = {\n  items: [],\n  totalAmount: 0,\n};\n\nconst cartReducer = (state, action) => {\n  if (action.type === \"ADD\") {\n    const updatedTotalAmount =\n      state.totalAmount + action.item.price * action.item.amount;\n\n    const existingCartItemIndex = state.items.findIndex(\n      (item) => item.id === action.item.id\n    );\n    const existingCartItem = state.items[existingCartItemIndex];\n\n    let updatedItems;\n\n    if (existingCartItem) {\n      const updatedItem = {\n        ...existingCartItem,\n        amount: existingCartItem.amount + action.item.amount,\n      };\n\n      updatedItems = [...state.items];\n      updatedItems[existingCartItemIndex] = updatedItem;\n    } else {\n      updatedItems = state.items.concat(action.item);\n    }\n\n    return {\n      items: updatedItems,\n      totalAmount: updatedTotalAmount,\n    };\n  }\n\n  if (action.type === \"REMOVE\") {\n    const existingCartItemIndex = state.items.findIndex(\n      (item) => item.id === action.id\n    );\n    const existingItem = state.items[existingCartItemIndex];\n    const updatedTotalAmount = state.totalAmount - existingItem.price;\n    let updatedItems;\n    if (existingItem.amount === 1) {\n      updatedItems = state.items.filter((item) => item.id !== action.id);\n    } else {\n      const updatedItem = { ...existingItem, amount: existingItem.amount - 1 };\n      updatedItems = [...state.items];\n      updatedItems[existingCartItemIndex] = updatedItem;\n    }\n    return  {\n        items: updatedItems,\n        totalAmount: updatedTotalAmount\n    }\n  }\n\n\n  \n\n  return defaultCartState;\n};\n\nconst CartProvider = (props) => {\n  const [cartState, dispatchCartAction] = useReducer(\n    cartReducer,\n    defaultCartState\n  );\n\n  const addItemToCartHandler = (item) => {\n    dispatchCartAction({ type: \"ADD\", item: item });\n  };\n  const removeItemFromCartHandler = (id) => {\n    dispatchCartAction({ type: \"REMOVE\", id: id });\n  };\n\n  const cartContext = {\n    items: cartState.items,\n    totalAmount: cartState.totalAmount,\n    addItem: addItemToCartHandler,\n    removeItem: removeItemFromCartHandler,\n  };\n\n  return (\n    <CartContext.Provider value={cartContext}>\n      {props.children}\n    </CartContext.Provider>\n  );\n};\n\nexport default CartProvider;\n","import {createContext, useContext, useReducer} from 'react';\n\n//Prepares the data layer\nexport const StateContext = createContext();\n\n\n//Wraps our app and provides the Data Layer\nexport const StateProvider = ({reducer, initialState, children}) => (\n    <StateContext.Provider value ={useReducer(reducer, initialState)}>\n        {children}\n    </StateContext.Provider>\n);\n\n//Pull information from the data layer\nexport const useStateValue = () => useContext(StateContext);","import firebase from \"firebase\";\n\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCsFsaexeMbyYZKocC4O8ZnzPWtVqQAFfk\",\n  authDomain: \"clone-app-850bb.firebaseapp.com\",\n  projectId: \"clone-app-850bb\",\n  storageBucket: \"clone-app-850bb.appspot.com\",\n  messagingSenderId: \"215696973142\",\n  appId: \"1:215696973142:web:29793dadf78c86c34d0af7\",\n};\n\nconst firebaseApp = firebase.initializeApp(firebaseConfig);\n\nconst db = firebaseApp.firestore();\nconst auth = firebase.auth();\n\nexport { db, auth };\n","import \"./Header.css\";\nimport SearchIcon from \"@mui/icons-material/Search\";\nimport ShoppingBasketIcon from \"@mui/icons-material/ShoppingBasket\";\nimport { Link } from \"react-router-dom\";\nimport { useStateValue } from \"../store/use-context\";\nimport {auth} from '../firebase';\nimport { useContext } from \"react\";\nimport CartContext from \"../store/cart-context\";\n\nconst Header = () => {\n  const cartCtx =  useContext(CartContext);\n  const [{ basket, user }, dispatch] = useStateValue();\n\n  const numberOfCartItems = cartCtx.items.reduce((curNumber, item) => {\n    return curNumber + item.amount;\n  }, 0);\n\n  const authHandler = () => {\n    if (user) {\n      auth.signOut();\n    }\n  };\n\n  return (\n    <div className=\"header\">\n      <Link to=\"/\">\n        <img\n          className=\"header__logo\"\n          src=\"http://pngimg.com/uploads/amazon/amazon_PNG11.png\"\n        />\n      </Link>\n\n      <div className=\"header__search\">\n        <input className=\"header__searchInput\" type=\"text\" />\n        <SearchIcon className=\"header__searchIcon\" />\n      </div>\n      <div className=\"header__nav\">\n\n        <Link to={!user && \"/login\"}>\n          <div onClick={authHandler} className=\"header__option\">\n            <span className=\"header__optionLineOne\">Hello {!user ? 'User' : user?.email}</span>\n            <span className=\"header__optionLineTwo\">{user ? 'Sign Out' : 'Sign In'}</span>\n          </div>\n        </Link>\n\n        <div className=\"header__option\">\n          <span className=\"header__optionLineOne\">Returns</span>\n          <span className=\"header__optionLineTwo\">& Ordes</span>\n        </div>\n        <div className=\"header__option\">\n          <span className=\"header__optionLineOne\">Your</span>\n          <span className=\"header__optionLineTwo\">Prime</span>\n        </div>\n\n        <Link to=\"/checkout\">\n          <div className=\"header__optionBasket\">\n            <ShoppingBasketIcon />\n            <span className=\"header__basketCount header__optionLineTwo\">\n              {numberOfCartItems}\n            </span>\n          </div>\n        </Link>\n      </div>\n    </div>\n  );\n};\n\nexport default Header;\n","import React from 'react';\nimport styles from './Input.module.css';\n\n\nconst Input = React.forwardRef((props, ref) => {\n    return <div className={styles.input}>\n        <label htmlFor={props.input.id}>{props.label}</label>\n        <input ref={ref} {...props.input}/>\n    </div>\n});\n\nexport default Input;","import React, {useRef, useState} from 'react';\nimport styles from './ProductItemForm.module.css'\nimport Input from '../UI/Input';\n\n\nconst ProductItemForm = (props) => {\n\n    const [amountIsValid, setAmountIsValid] = useState(true); //para el mensaje de error\n\n    const amountInputRef = useRef();\n\n    const submitHandler = event => {\n        event.preventDefault();\n        \n        const enteredAmount = amountInputRef.current.value; //siempre queda como string\n        const enteredAmountNumber = +enteredAmount //hace que el string anterior sea numero\n        if(\n            enteredAmount.trim().length === 0 || \n            enteredAmountNumber < 1 || \n            enteredAmountNumber > 5\n        ) {\n            setAmountIsValid(false);\n            return;\n        }\n\n        props.onAddToCart(enteredAmountNumber);\n    }\n\n    return (\n        <form className={styles.form} onSubmit={submitHandler}>\n            <Input \n            ref={amountInputRef}\n            label='Amount'\n            input={{\n                id: 'amount' + props.id,\n                type: 'number',\n                min: '1',\n                max: '5',\n                step: '1', \n                defaultValue: '1'\n            }}\n            />\n            <button>Add to basket</button>\n            {!amountIsValid && <p>Please enter a valid amount (1-5).</p>}\n        </form>\n    )\n}\n\nexport default ProductItemForm;","import { useContext } from 'react';\nimport './Products.css'\nimport ProductItemForm from \"./ProductItemForm\";\nimport CartContext from '../store/cart-context';\n\n\nconst Products = (props) => {\n\n  const cartCtx =  useContext(CartContext)\n\n  const addToCartHandler = amount => {\n    cartCtx.addItem({\n      id: props.id,\n      title: props.title,\n      amount: amount,\n      image: props.image,\n      rating: props.rating,\n      price: props.price\n    })\n  };\n\n  return (\n    <div className=\"product\">\n      <div className=\"product__info\">\n        <p>{props.title}</p>\n        <p className=\"product__price\">\n          <small>$</small>\n          <strong>{props.price}</strong>\n        </p>\n        <div className=\"product__rating\">\n          {Array(props.rating)\n            .fill()\n            .map((_, i) => (\n              <p>⭐</p>\n            ))}\n        </div>\n      </div>\n      <img src={props.image} />\n      <ProductItemForm onAddToCart={addToCartHandler}/>\n    </div>\n  );\n};\n\nexport default Products;\n","import { useEffect, useState } from \"react\";\n\nimport styles from  \"./Home.css\";\nimport Products from \"../Products/Products\";\nconst Home = () => {\n  const [products, setProducts] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [httpError, setHttpError] = useState();\n  useEffect(() => {\n    const fetchProducts = async () => {\n      const response = await fetch(\n        \"https://clone-app-850bb-default-rtdb.firebaseio.com/products.json\"\n      );\n\n      if (!response.ok) {\n        throw new Error(\"Something went wrong\");\n      }\n\n      const responseData = await response.json();\n      const loadedProducts = [];\n\n      for (const key in responseData) {\n        loadedProducts.push({\n          id: key,\n          title: responseData[key].title,\n          price: responseData[key].price,\n          image: responseData[key].image,\n          rating: responseData[key].rating,\n        });\n      }\n      setProducts(loadedProducts);\n      setIsLoading(false)\n    };\n\n    fetchProducts().catch((error) => {\n      setIsLoading(false);\n      setHttpError(error.message)\n    })\n  }, []);\n\n  if (isLoading) {\n    return <section className={styles.ProductsLoading}>\n        <p>Loading...</p>\n    </section>\n  }\n\n  if (httpError) {\n    return <section className={styles.ProductsError}>\n      <p>{httpError}</p>\n    </section>\n  }\n\n  const productsList = products.map(product => <Products \n    key={product.id} \n    id={product.id}\n    title={product.title}\n    rating={product.rating}\n    price={product.price}\n    image={product.image}\n    />)\n\n  return (\n    <div className=\"home\">\n      <div className=\"home__container\">\n        <img\n          className=\"home__image\"\n          src=\"https://images-eu.ssl-images-amazon.com/images/G/02/digital/video/merch2016/Hero/Covid19/Generic/GWBleedingHero_ENG_COVIDUPDATE__XSite_1500x600_PV_en-GB._CB428684220_.jpg\"\n          alt=\"\"\n        />\n        <div className=\"home__row\">\n          {productsList[0]}\n          {productsList[1]}\n        </div>\n\n        <div className=\"home__row\">\n        {productsList[2]}\n        {productsList[3]}\n        {productsList[4]}\n        </div>\n\n        <div className=\"home__row\">\n        {productsList[5]}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Home;\n","import { useContext } from \"react\";\nimport CartContext from \"../store/cart-context\";\n\n\n\nimport './Subtotal.css';\nimport { useHistory } from 'react-router-dom';\nconst Subtotal = () => {\n\n  \n  const cartCtx = useContext(CartContext);\n  const numberOfCartItems = cartCtx.items.reduce((curNumber, item) => {\n    return curNumber + item.amount;\n  }, 0);\n\n  const hasItems = cartCtx.items.length > 0\n\n  const totalAmount = `$${cartCtx.totalAmount.toFixed(2)}`;\n  const history = useHistory();\n  \n  const paymentHandler = (event) => {\n    event.preventDefault();\n    history.push('/payment')\n  };\n\n\n return <div className='subtotal'>\n  \n            <p>\n              \n              Subtotal ({numberOfCartItems} items): <strong>{totalAmount}</strong>\n            </p>\n            {hasItems && <small className=\"subtotal__gift\">\n              <input type=\"checkbox\" /> This order contains a gift\n            </small>}\n\n      {hasItems && <button onClick={paymentHandler}>Proceed to Checkout</button>}\n </div>\n}\n\nexport default Subtotal;","\n\nimport \"./CheckoutProduct.css\";\n\nconst CheckoutProduct = (props) => {\n\n\n \n  return (\n    <div className=\"checkoutProduct\">\n      <img className=\"checkoutProduct__image\" src={props.image} />\n\n      <div className=\"checkoutProduct__info\">\n        <p className=\"checkoutProduct__title\">{props.title}</p>\n        <p className=\"checkoutProduct__price\">\n          <small>$</small>\n          <strong>{props.price}</strong>\n        </p>\n        <span>x {props.amount}</span>\n        <div className=\"checkoutProduct__rating\">\n          {Array(props.rating)\n            .fill()\n            .map((_, i) => (\n              <p>⭐</p>\n            ))}\n        </div>\n        <div>\n          <button onClick={props.onRemove}>−</button>\n          <button onClick={props.onAdd}>+</button>\n      </div>\n        <button>Remove from basket</button>\n      </div>\n    </div>\n  );\n};\n\nexport default CheckoutProduct;\n","import { useContext } from 'react';\n\nimport CartContext from '../store/cart-context';\nimport Subtotal from './Subtotal'\nimport \"./Checkout.css\";\nimport { useStateValue } from '../store/use-context';\nimport CheckoutProduct from './CheckoutProduct';\n\n\n\nconst Checkout = () => {\n\n  const cartCtx = useContext(CartContext);\n\n\n \n  const [{basket, user}, dispatch] = useStateValue();\n  \n  const cartItemRemoveHandler = id => {\n    cartCtx.removeItem(id)\n  };\n  const cartItemAddHandler = item => {\n    cartCtx.addItem({...item, amount: 1})\n  };\n\n  \n      \n \n  return (\n    <div className=\"checkout\">\n      <div className=\"checkout__left\">\n        <img\n          className=\"checkout__ad\"\n          src=\"https://images-na.ssl-images-amazon.com/images/G/02/UK_CCMP/TM/OCC_Amazon1._CB423492668_.jpg\"\n          alt=\"Checkput ad\"\n        />\n        <div>\n          <h3>Hello, {user?.email}</h3>\n          <h2 className='checkout__title'>Your shopping basket</h2>\n          {cartCtx.items.map(item => (\n            <CheckoutProduct\n            key={item.id}\n            id={item.id}\n            title={item.title}\n            image={item.image}\n            amount={item.amount}\n            price={item.price}\n            rating={item.rating}\n            onRemove={cartItemRemoveHandler.bind(null, item.id)}\n            onAdd={cartItemAddHandler.bind(null, item)}\n            />\n          ))}\n        </div>\n      </div>\n\n      <div className='checkout__right'>\n          <Subtotal />\n      </div>\n    </div>\n  );\n};\n\nexport default Checkout;\n","import { Link, useHistory } from \"react-router-dom\";\nimport React, { useState } from \"react\";\nimport \"./Login.css\";\nimport { auth } from \"../firebase\";\n\nconst Login = () => {\n  const history = useHistory();\n  const [email, setEmail] = useState(\"\");\n  const [user, setUser] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [isLogin, setIsLogin] = useState(true);\n\n  const switchAuthModeHandler = () => {\n    setIsLogin((prevState) => !prevState);\n  };\n\n  const userHandler = (event) => {\n    setUser(event.target.value);\n  };\n\n  const emailHandler = (event) => {\n    setEmail(event.target.value);\n  };\n\n  const passwordHandler = (event) => {\n    setPassword(event.target.value);\n  };\n\n  const signInHandler = (event) => {\n    event.preventDefault();\n    auth\n      .signInWithEmailAndPassword(email, password)\n      .then((auth) => {\n        history.push(\"/\");\n      })\n      .catch((error) => alert(error.message));\n  };\n\n  const registerHandler = (event) => {\n    event.preventDefault();\n    auth\n      .createUserWithEmailAndPassword(email, password)\n      .then((auth) => {\n        console.log(auth);\n        if (auth) {\n          history.push(\"/\");\n        }\n      })\n      .catch((error) => alert(error.message));\n  };\n  const signinUpHandler = (event) => {\n    if (isLogin) {\n      signInHandler(event);\n    } else {\n      registerHandler(event);\n    }\n  };\n\n  return (\n    <div className=\"login\">\n      <Link to=\"/\">\n        <img\n          className=\"login__logo\"\n          src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a9/Amazon_logo.svg/1024px-Amazon_logo.svg.png\"\n          alt=\"Amazon Logo\"\n        />\n      </Link>\n\n      <div className=\"login__container\">\n        <h1>{isLogin ? \"Sign In\" : \"Sign Up\"}</h1>\n        <form>\n          {!isLogin && <label htmlFor=\"user\">Username</label>}\n         {!isLogin && <input\n            value={user}\n            type=\"text\"\n            id=\"user\"\n            onChange={userHandler}\n          />}\n          <label htmlFor=\"email\">Email</label>\n          <input\n            value={email}\n            type=\"email\"\n            id=\"email\"\n            onChange={emailHandler}\n          />\n          <label htmlFor=\"password\">Password</label>\n          <input\n            value={password}\n            type=\"password\"\n            id=\"password\"\n            onChange={passwordHandler}\n          />\n          {/* <h5>E-mail</h5>\n          <input type=\"text\" />\n          <h5>Password</h5>\n          <input type=\"password\" /> */}\n          <button\n            type=\"submit\"\n            onClick={signinUpHandler}\n            className=\"login__signInButton\"\n          >\n            {isLogin ? \"Sign In\" : \"Create Account\"}\n          </button>\n        </form>\n        <p>\n          By signing-in you agree to the AMAZON FAKE CLONE Conditions of Use &\n          Sale. Please see our Privacy Notice, our Cookies Notice and our\n          Interest-Based Ads Notice.\n        </p>\n        <button\n          onClick={switchAuthModeHandler}\n          className=\"login__registerButton\"\n        >\n          {isLogin\n            ? \"Create your Amazon account\"\n            : \"Login with existing account\"}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n","\n\nconst PaymentProducts = (props) => {\n    return     <div className=\"checkoutProduct\">\n    <img className=\"checkoutProduct__image\" src={props.image} />\n\n    <div className=\"checkoutProduct__info\">\n      <p className=\"checkoutProduct__title\">{props.title}</p>\n      <p className=\"checkoutProduct__price\">\n        <small>$</small>\n        <strong>{props.price}</strong>\n      </p>\n      <span>x {props.amount}</span>\n      <div className=\"checkoutProduct__rating\">\n        {Array(props.rating)\n          .fill()\n          .map((_, i) => (\n            <p>⭐</p>\n          ))}\n      </div>\n  </div>\n  </div>\n}\n\nexport default PaymentProducts;","export const initialState = {\n  basket: [],\n  user: null\n};\n\n//Selector (es la que hace que sume el precio en el subtotal)\nexport const getBasketTotal = (basket) =>\n  basket?.reduce((amount, item) => item.price + amount, 0);\n\nconst reducer = (state, action) => {\n\n  switch (action.type) {\n    case \"ADD_TO_BASKET\":\n      return {\n        ...state,\n        basket: [...state.basket, action.item],\n      };\n\n    case \"REMOVE_ITEM\":\n      const index = state.basket.findIndex(\n        (basketItem) => basketItem.id === action.id\n      );\n      let newBasket = [...state.basket];\n      if (index >= 0) {\n        newBasket.splice(index, 1);\n      } else {\n        console.warn(\n          `Cant remove product (id: ${action.id} as its not in basket!)`\n        );\n      }\n      return { ...state, basket: newBasket };\n\n\n      case 'SET_USER':\n        return {\n          ...state,\n          user: action.user\n        }\n\n        \n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n","import { CardElement, useStripe, useElements } from \"@stripe/react-stripe-js\";\nimport { useStateValue } from \"../store/use-context\";\nimport \"./Payment.css\";\nimport CheckoutProduct from \"../Cart/CheckoutProduct\";\nimport PaymentProducts from './PaymentProducts'\nimport { Link, useHistory } from \"react-router-dom\";\nimport { useState, useEffect, useContext } from \"react\";\nimport { getBasketTotal } from \"../store/use-reducer\";\nimport CurrencyFormat from \"react-currency-format\";\nimport axios from \"axios\";\nimport CartContext from \"../store/cart-context\";\n\nconst Payment = () => {\n  const history = useHistory();\n  const [{ basket, user }, dispatch] = useStateValue();\n  const [error, setError] = useState(null);\n  const [disabled, setDisabled] = useState(true);\n  const [succeeded, setSucceeded] = useState(false);\n  const [processing, setProcessing] = useState(\"\");\n  const [clientSecret, setClientSecret] = useState(true);\n\n  const cartCtx = useContext(CartContext);\n  const totalAmount = `$${cartCtx.totalAmount.toFixed(2)}`;\n\n  const numberOfCartItems = cartCtx.items.reduce((curNumber, item) => {\n    return curNumber + item.amount;\n  }, 0);\n\n  const cartItemRemoveHandler = id => {\n    cartCtx.removeItem(id)\n  };\n  const cartItemAddHandler = item => {\n    cartCtx.addItem({...item, amount: 1})\n  };\n\n  useEffect(() => {\n    //special stripewhich allows to charge customer. * 100 axios es porque axios espera recibir centavos/subunits\n    const getClientSecret = async () => {\n      const response = await axios({\n        method: \"POST\",\n        url: `/payments/create?total=${getBasketTotal(basket) * 100}`,\n      });\n      setClientSecret(response.data.clientSecret);\n    };\n    getClientSecret();\n  }, [basket]);\n\n  const stripe = useStripe();\n  const elements = useElements();\n\n  const submitHandler = async (event) => {\n    event.preventDefault();\n    setProcessing(true);\n\n    const payload = await stripe\n      .confirmCardPayment(clientSecret, {\n        payment_method: {\n          card: elements.getElement(CardElement),\n        },\n      })\n      .then(({ paymentIntent }) => {\n        //paymentIntent = payment confirmation\n        setSucceeded(true);\n        setProcessing(false);\n        setError(null);\n        history.replace(\"/orders\");\n      });\n  };\n\n  const changeHandle = (event) => {\n    setDisabled(event.empyty);\n    setError(event.error ? event.error.message : \"\");\n  };\n\n  return (\n    <div className=\"payment\">\n      <div className=\"payment__container\">\n        <h1>\n          {\" \"}\n          Checkout (<Link to=\"/checkout\">{numberOfCartItems} items</Link>)\n        </h1>\n        <div className=\"payment__section\">\n          <div className=\"payment__title\">\n            <h1>Delivery Address</h1>\n          </div>\n          <div className=\"payment__address\">\n            <p>{user?.email}</p>\n            <p>street</p>\n            <p>city</p>\n          </div>\n        </div>\n        <div className=\"payment__section\">\n          <div className=\"payment__title\">\n            <h3>Reviews items and delivery</h3>\n          </div>\n          <div className=\"payment__items\">\n            {cartCtx.items.map((item) => (\n              <PaymentProducts\n                key={item.id}\n                id={item.id}\n                amount={item.amount}\n                title={item.title}\n                image={item.image}\n                price={item.price}\n                rating={item.rating}\n                onRemove={cartItemRemoveHandler.bind(null, item.id)}\n                onAdd={cartItemAddHandler.bind(null, item)}\n              />\n            ))}\n          </div>\n        </div>\n        <div className=\"payment__section\">\n          <div className=\"payment__title\">\n            <h3>Payment Method</h3>\n          </div>\n          <div className=\"payment__details\">\n            <form onSubmit={submitHandler}>\n              <CardElement onChange={changeHandle} />\n              <div className=\"payment__priceContainer\">\n                <h3>Order total: {totalAmount}</h3>\n\n                <button disabled={processing || disabled || succeeded}>\n                  <span>{processing ? <p>Processing</p> : \"Buy now\"}</span>\n                </button>\n              </div>\n              {error && <div>{error}</div>}\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Payment;\n","import { useEffect } from \"react\";\nimport CartProvider from \"./store/CartProvider\";\nimport \"./App.css\";\nimport Header from \"./MainNavigation/Header\";\nimport Home from \"./Body/Home\";\nimport { Route, Switch } from \"react-router-dom\";\nimport Checkout from \"./Cart/Checkout\";\nimport Login from \"./Body/Login\";\nimport { auth } from \"./firebase\";\nimport { useStateValue } from \"./store/use-context\";\nimport Payment from \"./Payment/Payment\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { Elements } from \"@stripe/react-stripe-js\";\n\nconst promise = loadStripe(\n  \"pk_test_51Jv9msJmz5Kc2orRIbqDXHJOXXFNlK8LYzZheRyNSQcFHM3Xmc2IHKjWmEHSI8zBYHcvOfrXq2eC8RPpsyPT45Pa00d7lsrzY1\"\n);\n\nfunction App() {\n  const [{}, dispatch] = useStateValue();\n\n  useEffect(() => {\n    //will only run once when the app components loads\n    auth.onAuthStateChanged((authUser) => {\n      console.log(\"USER IS >>>>\", authUser);\n\n      if (authUser) {\n        //the user is logged in / the user was logged in\n        dispatch({\n          type: \"SET_USER\",\n          user: authUser,\n        });\n      } else {\n        //the user is logged out\n        dispatch({\n          type: \"SET_USER\",\n          user: null,\n        });\n      }\n    });\n  }, []);\n\n  return (\n    <CartProvider>\n      <div className=\"app\">\n        <Header />\n        <Switch>\n          <Route path=\"/login\">\n            <Login />\n          </Route>\n          <Route path=\"/checkout\">\n            <Checkout />\n          </Route>\n          <Route path=\"/payment\">\n            <Elements stripe={promise}>\n              <Payment />\n            </Elements>\n          </Route>\n          <Route path=\"/\">\n            <Home />\n          </Route>\n        </Switch>\n      </div>\n    </CartProvider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { StateProvider } from \"./store/use-context\";\nimport reducer, {initialState} from './store/use-reducer';\n\nReactDOM.render(\n  <BrowserRouter>\n    <StateProvider initialState={initialState} reducer={reducer}>\n      {reducer}\n      <App />\n    </StateProvider>\n  </BrowserRouter>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"ProductItemForm_form__34tRf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input\":\"Input_input__3gTSF\"};"],"sourceRoot":""}